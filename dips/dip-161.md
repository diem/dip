---
dip: 161
title: Off-Chain Protocol Optional Result Field
authors: David Wolinsky (@davidiw), SunMi Lee (@sunmilee), Xiao Li (@xli)
status: Draft
discussions-to: https://github.com/diem/dip/issues/161
type: Informational
created: 04/07/2021
requires: DIP-1
---

import useBaseUrl from '@docusaurus/useBaseUrl';

# Summary

This DIP describes an optional field `result` in off-chain protocol `CommandResponseObject` for server to synchronous response command specific result.

# Abstract

Both the Off-Chain Protocol and Travel Rule Exchange (or PaymentCommand) are defined in [DIP-1][1]. The Off-Chain Protocol was defined in such a way as to support the minimal requirements for these exchanges, specifically, in this case, asynchronous responses to requests. Many types of communication benefit from synchronous responses as it provides for both protocol simplicity and reduced latency. In order to support synchronous commands, the `CommandResponseObject` can leverage an optional field `result` to define command specific response object. The `result` field, if defined, must contain `_ObjectType` that should uniquely define the shape or other fields within the `result`.


# Specification

The new [CommandResponseObject][2] definition:

| Field        | Type                     | Required? | Description                                                                                                                                                                |
|--------------|--------------------------|-----------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| \_ObjectType | str                      | Y         | The fixed string `CommandResponseObject`.                                                                                                                                  |
| status       | str                      | Y         | Either `success` or `failure`.                                                                                                                                             |
| error        | [OffChainErrorObject][3] | N         | Details of the error when status == "failure"                                                                                                                              |
| cid          | str                      | N         | The Command identifier to which this is a response. Should be a UUID according to [RFC4122][4] with "-"'s included and should match the 'cid' of the CommandRequestObject. |
| result       | object                   | N         | The command result object, must contain `_ObjectType` field to reference to an object definition.                                                                          |

Here's an example from [DIP-10][5]:

```
{
   "_ObjectType": "CommandResponseObject",
    "status": "success",
    "result": {
	    "_ObjectType": "ReferenceIDCommandResponse",
	    "recipient_address": "c5ab123458df0003415689adbb47326d",
    },
    "cid": "12ce83f6-6d18-0d6e-08b6-c00fdbbf085a",
}
```

[1]: https://dip.diem.com/dip-1
[2]: https://dip.diem.com/dip-1/#commandresponseobject
[3]: https://dip.diem.com/dip-1/#offchainerrorobject
[4]: https://tools.ietf.org/html/rfc4122
[5]: https://github.com/diem/dip/blob/main/dips/dip-10.md
